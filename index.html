<script>
fetch("https://api.dify.ai/v1/workflows/run", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer app-zTfTieMtNP3QLwjsbQ93Augj"
  },
  body: JSON.stringify({
    inputs: {},
    response_mode: "blocking",
    user: "web-user"
  })
})
.then(r => r.json())
.then(res => {
  console.log(res);

  // ðŸ”¥ ê°€ìž¥ í”í•œ êµ¬ì¡° ëŒ€ì‘
  let data = res.data?.outputs;

  // outputs ì•ˆì— ë˜ ë“¤ì–´ìžˆëŠ” ê²½ìš° ëŒ€ë¹„
  if (typeof data === "string") {
    try { data = JSON.parse(data); } catch(e) {}
  }

  const el = document.getElementById("news");

  if (!Array.isArray(data)) {
    el.innerText = "ë°ì´í„° í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    return;
  }

  el.innerHTML = data.map(n => `
    <div class="item">
      <a href="${n.link}" target="_blank">${n.title}</a>
      <p>${n.summary}</p>
    </div>
  `).join("");
})
.catch(err => {
  console.error(err);
  document.getElementById("news").innerText = "ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
});
</script>

